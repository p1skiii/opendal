âº åŸºäºŽä½ å½“å‰çš„ä¼˜ç§€è¿›å±•ï¼Œæˆ‘è®¤ä¸ºæœ‰å‡ ä¸ªé‡è¦æ–¹å‘å€¼å¾—è€ƒè™‘ã€‚è®©æˆ‘è¯¦ç»†åˆ†æžï¼š

  ðŸŽ¯ ç«‹å³ä¼˜å…ˆçº§å»ºè®®

  1. å®Œæ•´åŠŸèƒ½æµ‹è¯• (ä½ æåˆ°çš„ï¼Œæˆ‘å¼ºçƒˆèµžåŒ)

  åŽŸå› : ç›®å‰åªæœ‰ opendal-core å’Œ opendal-database ç»è¿‡è¯¦ç»†æµ‹è¯•ï¼Œå…¶ä»–åŒ…å­˜åœ¨é£Žé™©ã€‚

  å…·ä½“æµ‹è¯•æ–¹æ¡ˆ:
  # opendal-cloud æµ‹è¯•
  - AWS S3 æ‰©å±•åŠŸèƒ½ (å¦‚ S3 Select, Transfer Acceleration)
  - Azure é«˜çº§åŠŸèƒ½ (å¦‚ Hierarchical Namespace)
  - GCP ç‰¹å®šåŠŸèƒ½ (å¦‚ Uniform bucket-level access)

  # opendal-advanced æµ‹è¯•  
  - FUSE æ–‡ä»¶ç³»ç»ŸæŒ‚è½½
  - WebDAV åè®®æ”¯æŒ
  - å…¶ä»–é«˜çº§åè®® (å¦‚ SFTP)

  2. æœåŠ¡åˆ†ç±»éªŒè¯ (æˆ‘å¼ºçƒˆå»ºè®®)

  å‘çŽ°çš„æ½œåœ¨é—®é¢˜: æˆ‘ä»¬éœ€è¦éªŒè¯æ¯ä¸ªæœåŠ¡ç¡®å®žåœ¨æ­£ç¡®çš„åŒ…ä¸­ï¼š

  # åˆ›å»ºæœåŠ¡æ˜ å°„éªŒè¯è„šæœ¬
  def verify_service_routing():
      test_cases = [
          # Core services
          ("fs", "opendal_core"),
          ("s3", "opendal_core"),
          ("azblob", "opendal_core"),

          # Database services  
          ("mysql", "opendal_database"),
          ("postgresql", "opendal_database"),
          ("redis", "opendal_database"),

          # Cloud services - éœ€è¦éªŒè¯
          ("aws_lambda", "opendal_cloud"),  # å‡è®¾

          # Advanced services - éœ€è¦éªŒè¯  
          ("fuse", "opendal_advanced"),     # å‡è®¾
          ("webdav", "opendal_advanced"),   # å‡è®¾
      ]

  ðŸš€ é‡è¦ä½†å¯èƒ½è¢«å¿½è§†çš„å»ºè®®

  3. é”™è¯¯ä½“éªŒæµ‹è¯• (å…³é”®ä½†å®¹æ˜“å¿½è§†)

  åœºæ™¯: ç”¨æˆ·åªå®‰è£… opendal[core] ä½†å°è¯•ä½¿ç”¨æ•°æ®åº“æœåŠ¡æ—¶ä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ

  # æµ‹è¯•ç”¨ä¾‹
  import opendal
  # åªå®‰è£…äº† coreï¼Œæ²¡æœ‰ database
  op = opendal.Operator("mysql", connection_string="...")
  # æœŸæœ›: æ¸…æ™°çš„é”™è¯¯ä¿¡æ¯ï¼Œæç¤ºéœ€è¦å®‰è£… opendal[database]

  é‡è¦æ€§: è¿™ç›´æŽ¥å½±å“ç”¨æˆ·ä½“éªŒå’Œé‡‡ç”¨çŽ‡ã€‚

  4. æ€§èƒ½å›žå½’æµ‹è¯•

  æ‹…å¿ƒ: åˆ†å¸ƒå¼æž¶æž„å¯èƒ½å¼•å…¥æ€§èƒ½å¼€é”€ï¼ˆå¯¼å…¥æ—¶é—´ã€è·¯ç”±å¼€é”€ï¼‰

  # åŸºå‡†æµ‹è¯•
  import time

  # æµ‹è¯•å¯¼å…¥æ—¶é—´
  start = time.time()
  import opendal
  import_time = time.time() - start

  # æµ‹è¯•æœåŠ¡åˆ›å»ºæ—¶é—´  
  start = time.time()
  op = opendal.Operator("s3", bucket="test")
  creation_time = time.time() - start

  5. å†…å­˜å ç”¨åˆ†æž

  # å†…å­˜ä½¿ç”¨å¯¹æ¯”
  import psutil
  import os

  # åªå¯¼å…¥ opendal (å…ƒåŒ…)
  process = psutil.Process(os.getpid())
  memory_before = process.memory_info().rss

  import opendal
  memory_after = process.memory_info().rss
  print(f"Memory overhead: {(memory_after - memory_before) / 1024 / 1024:.2f} MB")

  ðŸ”„ ä¸­æœŸæˆ˜ç•¥å»ºè®®

  6. ç‰ˆæœ¬ç®¡ç†ç­–ç•¥è®¾è®¡

  é—®é¢˜: å¤šåŒ…å¦‚ä½•ä¿æŒç‰ˆæœ¬åŒæ­¥ï¼Ÿ

  # é€‰é¡¹1: ä¸¥æ ¼åŒæ­¥ç‰ˆæœ¬
  opendal==0.46.0 depends on opendal-core==0.46.0

  # é€‰é¡¹2: å…¼å®¹ç‰ˆæœ¬èŒƒå›´  
  opendal==0.46.0 depends on opendal-core>=0.46.0,<0.47.0

  7. æ¸è¿›å¼å‘å¸ƒç­–ç•¥

  å»ºè®®: ä¸è¦ä¸€æ¬¡æ€§åˆ‡æ¢ï¼Œè€Œæ˜¯å¹¶è¡Œå‘å¸ƒï¼š

  # Phase 1: å¹¶è¡Œå‘å¸ƒ
  pip install opendal          # ä¼ ç»Ÿå•ä½“åŒ… (0.46.0)
  pip install opendal-next     # æ–°åˆ†å¸ƒå¼å…ƒåŒ… (0.46.0)

  # Phase 2: é€æ­¥è¿ç§» (3-6ä¸ªæœˆåŽ)
  pip install opendal          # æŒ‡å‘åˆ†å¸ƒå¼ç‰ˆæœ¬

  # Phase 3: å®Œå…¨åˆ‡æ¢
  # åºŸå¼ƒå•ä½“åŒ…

  8. CI/CD æµç¨‹é‡æž„

  å½“å‰ CI å¯èƒ½åªæž„å»ºå•ä½“åŒ…ï¼Œéœ€è¦ï¼š
  # æ–°çš„æž„å»ºæµç¨‹
  build:
    - build-opendal-core
    - build-opendal-database
    - build-opendal-cloud
    - build-opendal-advanced
    - build-opendal-meta
    - integration-test-all-combinations

  ðŸ¤” æŽ¢è®¨æ€§é—®é¢˜

  9. ç”¨æˆ·è¿ç§»è·¯å¾„

  é—®é¢˜: çŽ°æœ‰ç”¨æˆ·å¦‚ä½•å¹³æ»‘è¿ç§»ï¼Ÿ

  æ–¹æ¡ˆA: è‡ªåŠ¨è¿ç§»
  # åœ¨ opendal.__init__.py ä¸­æ£€æµ‹å¹¶å»ºè®®
  if detect_missing_services():
      warn("Consider installing opendal[database] for full functionality")

  æ–¹æ¡ˆB: æ–‡æ¡£å¼•å¯¼
  - æä¾›è¿ç§»æ£€æŸ¥å·¥å…·
  - è¯¦ç»†çš„è¿ç§»æŒ‡å—

  10. ç¤¾åŒºåé¦ˆæœºåˆ¶

  å»ºè®®: åœ¨æ­£å¼å‘å¸ƒå‰ï¼Œå»ºç«‹ beta æµ‹è¯•ç¨‹åºï¼š
  pip install opendal-beta[database]  # Beta ç‰ˆæœ¬æµ‹è¯•

  ðŸ“‹ æˆ‘çš„æŽ¨èæ‰§è¡Œé¡ºåº

  Week 1-2 (ç«‹å³):
  1. âœ… å®Œæ•´åŠŸèƒ½æµ‹è¯• (ä½ æåˆ°çš„)
  2. âœ… æœåŠ¡åˆ†ç±»éªŒè¯
  3. âœ… é”™è¯¯ä½“éªŒæµ‹è¯•

  Week 3-4 (ç´§æŽ¥ç€):
  4. æ€§èƒ½å›žå½’æµ‹è¯•
  5. å†…å­˜å ç”¨åˆ†æž6. ç‰ˆæœ¬ç®¡ç†ç­–ç•¥ç¡®å®š

  Month 2 (è§„åˆ’):
  7. CI/CD æµç¨‹é‡æž„
  8. æ¸è¿›å¼å‘å¸ƒç­–ç•¥å®žæ–½

  ðŸŽ² ä½ çš„æƒ³æ³•ï¼Ÿ

  1. **ä½ è§‰å¾—å“ªä¸ªå»ºè®®æœ€é‡è¦ï¼Ÿ**ä¸ºä»€ä¹ˆï¼Ÿ
  2. **å¯¹ç‰ˆæœ¬ç®¡ç†ç­–ç•¥æœ‰ä»€ä¹ˆæƒ³æ³•ï¼Ÿ**ä¸¥æ ¼åŒæ­¥ vs å…¼å®¹èŒƒå›´ï¼Ÿ
  3. ä½ å€¾å‘äºŽæ¿€è¿›åˆ‡æ¢è¿˜æ˜¯æ¸è¿›å¼å‘å¸ƒï¼Ÿ
  4. æœ‰æ²¡æœ‰æˆ‘é—æ¼çš„é‡è¦æµ‹è¯•åœºæ™¯ï¼Ÿ

  æˆ‘ç‰¹åˆ«æƒ³å¬å¬ä½ å¯¹æ¸è¿›å¼å‘å¸ƒçš„çœ‹æ³•ï¼Œè¿™å¯èƒ½æ˜¯é£Žé™©æœ€ä½Žçš„æ–¹æ¡ˆï¼Œä½†éœ€è¦æ›´å¤šç»´æŠ¤å·¥ä½œã€‚
